<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>index</title>
<script type="text/javascript" src="scripts/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="scripts/ajaxfileupload.js"></script>
</head>
<body>
	<div>
		<input type="file" name="icon" id="icon" />
	</div>
	<div>
		<input type="button" value="Submit" id="submit" />
	</div>
	<script type="text/javascript">
		$("#submit").click(function(){
			//alert("ok");
			uploadImage();
		});
		
		function uploadImage(){
			var imgPath = $("#icon").val();
			if(imgPath == ""){
				alert("请选择上传图片！");
				return;
			}
			
			var strExtension = imgPath.substr(imgPath.lastIndexOf('.') + 1);
			if (strExtension != 'jpg' && strExtension != 'gif' && strExtension !='png' && strExtension != 'bmp'){
				alert("请选择图片文件");
				return;
			}
			
			$.ajaxFileUpload({
				url: "http://192.168.1.78:8080/WeChat/rest/UserService/uploadIcon/fLoMfPZmJPkvxNUlFl3LvCP9TTueX__3D4sczSmFaLBUbJzU5zUOEN+Ai22HJEat__WMS8nnB52hSFnHvh6Aa5PWvA2zGrNV8u/64964361",
				secureuri: false,
				fileElementId: 'icon',
				success: function(data){
					alert("上传成功");
				},
				error:function(data){
					alert("上传失败");
				}
			});
			
			/*$.ajax({
				type: "POST",
				url: "http://192.168.1.78:8080/WeChat/rest/uploadIcon/12345678",
				data: { imgPath: $("#icon").val()},
				crossDomain:true,
				cache: false,
				success: function(data){
					alert("上传成功");
				},
				error: function(data){
					alert("上传失败");
				}
			});*/
		}
	</script>
</body>
</html>